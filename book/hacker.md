# 黑客思维

> 祸兮福之所倚，福兮祸之所伏。
> — 道德经

## 黑客思维

我有一段在信息安全公司工作的职业经历，期间最大的收获之一是理解了黑客视角，可以简单理解为“倒过来想“。

举个例子：假设你是一栋建筑的物业公司安防总设计师，你会做哪些设计？门卫、门禁、摄像头、火警、定期巡查、定期演练……这是从设计者、建设者的角度观察和思考。一般人会认为：都做了，就安全了。

- 如果倒过来想，从黑客和入侵者的角度观察呢？
- 如果倒过来想，思考房地产公司负责人、建筑设计师、施工者等不同角色，面对这栋建筑时是怎么想的？他们的想法是不是可能存在什么漏洞？他们的想法在流程衔接时，是不是可能存在什么漏洞？

在知乎上，有这么个问题：黑客为什么可以做到无需知道源码的情况下找出系统漏洞？  

参考链接：https://www.zhihu.com/question/29349016

提问者说：

> 我作为一个比较普通的程序员，要读懂一个别人的源码已经很不易了，还要从中找出漏洞。比如你把 Windows的源码放我面前，我肯定看晕了，别说找漏洞了，何况 Windows还不开源。Linux 开源，我看的也很晕，只能一点点抠。还有 Web 方面，不知道别人服务器的源码，怎么找出别人服务器的程序上的漏洞的呢？
>  
> 所以我觉得黑客或者说安全人员一定有和软件开发者不同的视角 ，来看待这个问题。  

Yuange 举了个例子：

> 别说源码，有时候二进制代码甚至连测试都不需要，就可以找到一些漏洞。  
>
> xp 挑战赛的时候，360 出了一个遁甲，浏览器里面装了一个沙箱，过滤对文档文件的读写操作。当时很多人研究了都觉得过这个沙箱比较困难和麻烦。  
>
> 我想了想一般沙箱会怎么做，在没有做分析二进制代码和做测试的情况下，提出可以修改 PID 的办法过这个沙箱。这样只需要在以前的正常的提权程序里加一句汇编代码就过了这个号称很厉害的沙箱。  
>
> 其实道理很简单，我设想这些做沙箱的会怎么做。  
>
> 启动 IE 浏览器的时候，沙箱会登记这进程的身份，进程身份比较典型的就是 PID。这些沙箱里的进程加载子进程的时候也一样要登记。然后读写文件发现是需要过滤的文件类型的时候，就会去检查操作的进程是不是被登记的进程，是登记的沙箱进程就拦截。  
>
> 类似一个人被打入黑五类标签登记了身份证号码，生的子女也继承身份被标记这样的标签。只需要修改自己的身份证号码就很容易让自己成为又红又专的群众，然后就可以自由了。

而 Tombkeeper 的回复是：

> 首先，“比较普通的程序员”和能不能成为黑客之间没有必然关系。黑客可能是很优秀的程序员，也可能不是。如果你看过 yuange 的程序，就会明白这一点。yuange 的编程能力比较差，编程习惯更差，整个儿就是一个编程反面教材的样板。但是，这丝毫不妨碍他成为世界上最优秀的黑客之一。
>
> “要读懂一个别人的源码已经很不易了”，这才是根源问题。无论有没有源码，黑客都必须要能分析、理解、推测程序实现，才能发现漏洞。这不是视角问题，是能力问题。这种能力在一定程度上可以训练。

孙子兵法里有一句“以正合，以奇胜”，意思是：用正常的、正面的兵力去交战，用奇兵、奇谋（出其不意的战术）去取得胜利。

套用到黑客思维里，或许可以理解为：具备正规设计、建设过程的能力，也可以用倒过来想，寻找正规建设因为各种约束，可能会留下的空档与间隙。

当然，就像 Tombkeeper 说的，分析、理解、推测、发现、利用，每个步骤，都需要扎实的能力训练。

## 一些黑客思维在商业上的例子

老子道德经里有一句：
> 祸兮福之所倚，福兮祸之所伏。

淮南子·人间训里有一则塞翁失马的故事：
> 近塞上之人有善术者。马无故亡而入胡。人皆吊之，其父曰：“此何遽不为福乎？”居数月，其马将胡骏马而归。人皆贺之，其父曰：“此何遽不能为祸乎？”家富良马，其子好骑，堕而折其髀。人皆吊之，其父曰：“此何遽不为福乎？”居一年，胡人大入塞，丁壮者引弦而战，近塞之人，死者十九，此独以跛之故，父子相保。故福之为祸，祸之为福，化不可极，深不可测也。

这让我感受到，就如硬币有两面、祸福一体一样，大公司成功的要素，往往也会对他们的能力、边界做出限制。很多公司能成功的因素，同时也埋下了他们失败的种子。

举几个我能想起的例子：

- 瑞星杀毒软件和 360 的战斗中，瑞星有着大量的渠道代理商，反而在“免费杀毒”的道路上堵住了自己的可能性，很长时间坐视 360 蚕食地盘。昔日的“福”（强大的线下渠道和付费模式），正是它日后的“祸”（无法转向免费模式的沉重枷锁）。这种成功因素埋下失败种子的现象，在商业史上，尤其是节奏极快的互联网行业，屡见不鲜。
- 柯达 (Kodak)是胶卷帝国，却被自己发明的数码技术颠覆。昔日之“福”是无懈可击的“胶卷+冲印”商业模式。柯达的“福”在于它建立了一个完美的商业模式。相机本身利润不高，但后续源源不断的胶卷销售和冲印服务，为其带来了天文数字的利润。它的黄色冲印店遍布全球，构成了难以逾越的护城河。这也带来了后来的“祸”：为了保护高利润的胶卷业务，柯达刻意压制了数码技术的发展。极具讽刺的是，世界上第一台数码相机正是由柯达的工程师发明的。但柯达的管理层看到这项技术后，感到的不是兴奋，而是恐惧。因为数码相片不需要胶卷，不需要冲印，会彻底摧毁他们最赚钱的业务。为了保护眼前的金山，他们选择将这项发明束之高阁。

## 知识星球的例子

需要先做好基础的社群功能，作为微信群的补充。

此后在微信、微博的夹缝中生存。

- 追逐高利润，反而有可能是给对手让出市场空间，反而在现有的客户市场里竞争力下降。

书里提到了“破坏性技术”的特点是：更简单、价格更便宜，而且性能更低。利润率通常更低。因此，也更难在成熟的公司里被支持。一个可能的解法是：内部孵化，成立新的组织来做尝试。

这点其实还蛮感慨的。早先我觉得微博很难做类似知识星球的功能时，我的理由是，微博的核心价值在于公开传播，如果变成私密社区，他们就丢了西瓜捡芝麻。所以微博后来推 V+，就很尴尬，不小心容易伤着自己。

回到当年，瑞星面对 360 免费杀毒竞争的困境，也是一样的。

而哪怕在我们这么小的产品里，也出现了“轻读”和知识星球之间的微妙“竞争”，或许真的需要独立品牌，独立运营，才是合理的？